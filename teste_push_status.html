<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Teste Notifica√ß√£o Push com Status</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    #status { margin-top: 15px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Teste de Notifica√ß√µes Push</h2>
  <button onclick="pedirOuNotificar()">Enviar Notifica√ß√£o</button>
  <div id="status">Status: aguardando a√ß√£o...</div>

  <script>
    const statusDiv = document.getElementById("status");

    function pedirOuNotificar() {
      if (!("Notification" in window)) {
        statusDiv.innerText = "Status: Este navegador n√£o suporta notifica√ß√µes.";
        return;
      }

      // Se ainda n√£o tiver permiss√£o, pede e j√° dispara depois
      if (Notification.permission !== "granted") {
        Notification.requestPermission().then(function(permissao) {
          if (permissao === "granted") {
            statusDiv.innerText = "Status: Permiss√£o concedida ‚úÖ";
            enviarNotificacao();
          } else {
            statusDiv.innerText = "Status: Permiss√£o negada ‚ùå";
          }
        });
      } else {
        statusDiv.innerText = "Status: Permiss√£o j√° concedida ‚úÖ";
        enviarNotificacao();
      }
    }

    function enviarNotificacao() {
      new Notification("üîî Notifica√ß√£o de Teste", {
        body: "Esta √© uma notifica√ß√£o simples!",
        icon: "https://cdn-icons-png.flaticon.com/512/1827/1827272.png"
      });
    }
  </script>
</body>
</html>